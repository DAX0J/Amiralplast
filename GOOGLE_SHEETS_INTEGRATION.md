# ๐ ุฏููู ุชูุงูู Google Sheets ูุน Google Sheets API

## โ ุงูุชูููุฐ ุงูุฌุฏูุฏ - Google Sheets API + Service Account

ุชู ุงุณุชุจุฏุงู ุงููุธุงู ุงููุฏูู (Google Apps Script Webhooks) ุจุญู ูุชูุฏู ูุณุชุฎุฏู **Google Sheets API** ูุจุงุดุฑุฉ ูุน **Service Account** ูุถูุงู ุงูููุซูููุฉ ูุงูุฃูุงู.

## ๐ง ุงูููููุงุช ุงููููุฐุฉ

### 1. Netlify Function ุงูุฌุฏูุฏุฉ
- **ุงูููู**: `netlify/functions/append-order.js`
- **ุงููุฏู**: ุงูุชุนุงูู ุงููุจุงุดุฑ ูุน Google Sheets API
- **ุงููููุฒุงุช**:
  - ุงุณุชุฎุฏุงู Service Account ูููุตุงุฏูุฉ
  - ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
  - ุฏุนู CORS ูุงูู
  - ุชุณุฌูู ููุตู ููุฃุฎุทุงุก

### 2. ุชุญุฏูุซ ุงูู Frontend
- **ุงูููู**: `client/src/lib/webhookIntegrationServerless.ts`
- **ุงูุชุบููุฑ**: ุงุณุชุจุฏุงู ุงูุงุณุชุฏุนุงุก ูู `google-sheets` ุฅูู `append-order`
- **ุงููุชูุฌุฉ**: ุงุชุตุงู ูุจุงุดุฑ ูุน Google Sheets API

### 3. ุฅุนุฏุงุฏ Environment Variables
- **ููู ุงููุฑุฌุน**: `.env.example`
- **ุงููุชุบูุฑุงุช ุงููุทููุจุฉ**:
  - `GOOGLE_SERVICE_ACCOUNT_KEY_JSON`: ูุญุชูู ููู JSON ูุงููุงู
  - `SPREADSHEET_ID`: ูุนุฑู ุงูุฌุฏูู

## โ ุญุงูุฉ ุงูุชูููุฐ - ููุชูู ููุฌุฑุจ

ุชู ุชูููุฐ ูุงุฎุชุจุงุฑ ุงููุธุงู ุจูุฌุงุญุ ููู ุฌุงูุฒ ููุฅูุชุงุฌ!

**ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูุฃุฎูุฑ:**
- โ ูุตุงุฏูุฉ Service Account ุชุนูู ุจูุฌุงุญ
- โ ุฅุถุงูุฉ ุงูุจูุงูุงุช ุฅูู Google Sheets ุชุชู ุจูุฌุงุญ
- โ Netlify Function ุชุนูู ุจุดูู ูุซุงูู
- โ ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ ููุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

## ๐ ุฎุทูุงุช ุงููุดุฑ ุนูู Netlify

### ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ Environment Variables

ูู ููุญุฉ ุชุญูู Netlify:
1. ุงุฐูุจ ุฅูู **Site Settings** โ **Environment Variables**
2. ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ (ุงุณุชุฎุฏู ุงูุจูุงูุงุช ุงููุนููุฉ):

```bash
GOOGLE_SERVICE_ACCOUNT_KEY_JSON=[ุถุน ูุญุชูู ููู JSON ุงููุงูู ููุง]
SPREADSHEET_ID=1C7xX-naJojJ1-TUaUXhWikprdqruuPYVyb7oBugYWXw
```

### ุงูุฎุทูุฉ 2: ุงูุชุฃูุฏ ูู ูุดุงุฑูุฉ Google Sheet
ุชุฃูุฏ ุฃู Google Sheet ูุดุงุฑู ูุน ุงูุฅูููู:
```
skin-by-miras@sage-facet-470205-m2.iam.gserviceaccount.com
```

### ุงูุฎุทูุฉ 3: ุงููุดุฑ
ุงููุธุงู ุฌุงูุฒ ูููุดุฑ. ุงูู Function ุงูุฌุฏูุฏุฉ ุณุชุนูู ุชููุงุฆูุงู ุนูุฏ ุงููุดุฑ.

## ๐ฏ ููููุฉ ุนูู ุงููุธุงู

1. **ุงููุณุชุฎุฏู ูุฑุณู ุงูุทูุจ** ูู ุงููููุน
2. **ุงูู Frontend ูุฑุณู ุงูุจูุงูุงุช** ุฅูู `/.netlify/functions/append-order`
3. **Netlify Function ุชุณุชุฎุฏู Service Account** ูููุตุงุฏูุฉ ูุน Google
4. **ุงูุจูุงูุงุช ุชูุถุงู ูุจุงุดุฑุฉ** ุฅูู Google Sheets ุนุจุฑ API
5. **ุฑุฏ ููุฑู** ุจุญุงูุฉ ุงููุฌุงุญ ุฃู ุงููุดู

## ๐ ุชูุณูู ุงูุจูุงูุงุช ูู ุงูุฌุฏูู

ุงูุจูุงูุงุช ุณุชูุถุงู ุจุงูุชุฑุชูุจ ุงูุชุงูู:
1. Timestamp (ุงูููุช ูุงูุชุงุฑูุฎ)
2. Order ID (ูุนุฑู ุงูุทูุจ)
3. Full Name (ุงูุงุณู ุงููุงูู)
4. Phone (ุฑูู ุงููุงุชู)
5. Product (ุงูููุชุฌ)
6. Quantity (ุงููููุฉ)
7. Total Price (ุงูุณุนุฑ ุงูุฅุฌูุงูู)
8. Wilaya (ุงูููุงูุฉ)
9. Baladia (ุงูุจูุฏูุฉ)
10. Delivery Type (ููุน ุงูุชูุตูู)
11. Notes (ุงูููุงุญุธุงุช)

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ุชุนูู ุงูู Function:
1. **ุชุญูู ูู Environment Variables** ูู Netlify Dashboard
2. **ุฑุงุฌุน ุงูู Function Logs** ูู Netlify Functions tab
3. **ุชุฃูุฏ ูู ูุดุงุฑูุฉ Google Sheet** ูุน Service Account email
4. **ุงุฎุชุจุฑ ุงูู Service Account** ูู ุฎูุงู Google Cloud Console

### ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุดุงุฆุนุฉ:
- `Missing Google Sheets credentials`: ูู ูุชู ุฅุนุฏุงุฏ environment variables
- `Invalid service account configuration`: ูุดููุฉ ูู JSON format
- `Authentication failed`: ูุดููุฉ ูู ููุชุงุญ Service Account
- `Spreadsheet not found`: ุงูู Sheet ุบูุฑ ูุดุงุฑู ุฃู ID ุฎุงุทุฆ

## โจ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

- ๐ **ุฃูุงู ูุญุณู**: ูุง ุชูุฌุฏ webhooks ููุดููุฉ
- โก **ุณุฑุนุฉ ุฃูุจุฑ**: ุงุชุตุงู ูุจุงุดุฑ ูุน Google Sheets API
- ๐๏ธ **ุชุญูู ุฃูุถู**: ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ ูุชุณุฌูู ููุตู
- ๐ฏ **ููุซูููุฉ ุนุงููุฉ**: ูุง ูุนุชูุฏ ุนูู Google Apps Script webhooks
- ๐ **ูุฑุงูุจุฉ ุฃูุถู**: logs ููุตูุฉ ูู Netlify Functions

## ๐๏ธ ูุง ุชู ุญุฐูู

- โ ุงูุงุนุชูุงุฏ ุนูู Google Apps Script webhooks
- โ ุงุณุชุฎุฏุงู environment variables ููุดููุฉ ูู ุงูู frontend
- โ ูุดุงูู CORS ุงููุชูุฑุฑุฉ ูุน webhooks
- โ ุงูุญุงุฌุฉ ูุฅุฏุงุฑุฉ Google Apps Script ูููุตูุฉ